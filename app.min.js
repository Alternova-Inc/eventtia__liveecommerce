function check_event_status(){"Commencera bientôt"==event_status?status_class_remove="scheduled-status":"Rediffusion"==event_status?status_class_remove="replay-status":"Live"==event_status?status_class_remove="live-status":console.log("Status not supported."),current_time=new Date,current_time<event_time_user_adjusted?(event_status="Commencera bientôt",status_class_add="scheduled-status"):current_time>event_time_finished?(event_status="Rediffusion",status_class_add="replay-status"):(event_status="Live",status_class_add="live-status"),"compact"==widgetType?(document.getElementsByClassName("eventtia-card-compact_badge")[0].innerHTML=event_status+"\n",document.getElementsByClassName("eventtia-card-compact_badge")[0].classList.remove(status_class_remove),document.getElementsByClassName("eventtia-card-compact_badge")[0].classList.add(status_class_add),document.getElementsByClassName("eventtia-card-compact_btn")[0].classList.remove(status_class_remove),document.getElementsByClassName("eventtia-card-compact_btn")[0].classList.add(status_class_add)):"expand"==widgetType?(document.getElementsByClassName("eventtia-card-expand_badge")[0].innerHTML=event_status+"\n",document.getElementsByClassName("eventtia-card-expand_badge")[0].classList.remove(status_class_remove),document.getElementsByClassName("eventtia-card-expand_badge")[0].classList.add(status_class_add),document.getElementsByClassName("eventtia-card-expand_btn")[0].classList.remove(status_class_remove),document.getElementsByClassName("eventtia-card-expand_btn")[0].classList.add(status_class_add)):console.log("Unsupported widget type.")}function gen_uuid(){(async function(){const{data:e,error:t}=await supabase.from("id_gen").insert([{user_id:user_id}]);t?(console.log("Error creating UUID:"),console.log(t)):(db_id=e[0].id,current_utc_time=e[0].created_at,localStorage.setItem("eventtia-tag",db_id))})()}function update_session(e,t){"none"!=db_id&&async function(){const{data:a,error:n}=await supabase.from("sessions").insert([{session_id:db_id,url:url,action:e,status:status_class_add.split("-")[0],event_date:event_utc_date+" "+event_utc_time,interaction_id:t}],{returning:"minimal"});n?(console.log("Error saving in Supabase:"),console.log(n)):("close"==e&&clearInterval(interval),"open"==e&&(interval=setInterval(function(){update_session("update",interaction_id_js)},6e4)))}()}let params=document.getElementById("eventtia-library").src;const french_months=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],french_week_days=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];scriptStyle=document.getElementById("eventtia-library").setAttribute("style","display: inline;");let params_array=params.split("?");const elements_array=[];for(let e=0;e<params_array.length;e++)elements_array.push(params_array[e].split("="));let url=elements_array[1][1],imageUrl=elements_array[2][1],widgetType=elements_array[3][1].toLowerCase(),event_utc_date=elements_array[4][1],event_utc_time=elements_array[5][1],event_duration_minutes=elements_array[6][1],env=null;env="env"===elements_array[elements_array.length-1][0]?"dev":"prod";let event_utc_date_array=event_utc_date.split("-"),event_utc_time_array=event_utc_time.split("-"),event_utc_js_datetime=new Date(parseInt(event_utc_date_array[0]),parseInt(event_utc_date_array[1])-1,parseInt(event_utc_date_array[2]),parseInt(event_utc_time_array[0]),parseInt(event_utc_time_array[1]),0,0),event_time_user_adjusted=new Date(parseInt(event_utc_date_array[0]),parseInt(event_utc_date_array[1])-1,parseInt(event_utc_date_array[2]),parseInt(event_utc_time_array[0]),parseInt(event_utc_time_array[1]),0,0),event_time_finished=new Date(parseInt(event_utc_date_array[0]),parseInt(event_utc_date_array[1])-1,parseInt(event_utc_date_array[2]),parseInt(event_utc_time_array[0]),parseInt(event_utc_time_array[1]),0,0),current_time=new Date,time_offset=current_time.getTimezoneOffset()/-60;event_time_user_adjusted.setHours(event_time_user_adjusted.getHours()+time_offset),event_time_finished.setHours(event_time_finished.getHours()+time_offset),event_time_finished.setMinutes(event_time_finished.getMinutes()+parseInt(event_duration_minutes));let year=event_utc_js_datetime.getFullYear(),month=event_utc_js_datetime.getMonth(),day=event_utc_js_datetime.getDate();day<10&&(day="0"+day);let hours=event_utc_js_datetime.getHours();hours<10&&(hours="0"+hours);let minutes=event_utc_js_datetime.getMinutes();minutes<10&&(minutes="0"+minutes);let week_day=event_utc_js_datetime.getDay(),readable_date=french_week_days[week_day]+" "+day+" "+french_months[month];readable_date+=" "+year+", "+hours+":"+minutes;let event_status="Commencera bientôt",status_class_add="scheduled-status",status_class_remove="scheduled-status";if("compact"==widgetType){let e=document.getElementsByClassName("eventtia-card-content")[0],t=document.getElementsByClassName("eventtia-btn")[0],a=t.textContent;e.setAttribute("style","display: inline;"),e.innerHTML='<ul class="eventtia-cards-compact">\n<li class="eventtia-cards-compact_item eventtia-btn">\n<div class="eventtia-card-compact">\n<div class="eventtia-card-compact_image">\n<img class="eventtia-card-compact_img" src="'+imageUrl+'">\n</div>\n<div class="eventtia-card-compact_content">\n<p class="eventtia-card-compact_badge">\n'+event_status+'\n</p>\n<h2 class="eventtia-card-compact_title">\n'+a+'\n</h2>\n<div class="eventtia-card-compact_button">\n<button class="eventtia-card-compact_btn eventtia-btn">\nCliquer ici \n</button>\n</div>\n</div>\n</div>\n</li>\n</ul>\n'}if("expand"==widgetType){let e=document.getElementsByClassName("eventtia-card-content")[0],t=document.getElementsByClassName("eventtia-title")[0].textContent,a=document.getElementsByClassName("eventtia-description")[0].textContent,n=document.getElementsByClassName("eventtia-btn")[0].textContent;e.innerHTML='<ul class="eventtia-cards-expand">\n<li class="eventtia-cards-expand_item">\n<div class="eventtia-card-expand">\n<div class="eventtia-card-expand_image">\n<img class="eventtia-card-expand_img" src="'+imageUrl+'">\n</div>\n<div class="eventtia-card-expand_content">\n<p class="eventtia-card-expand_badge">\n'+event_status+'\n</p>\n<h5 class="eventtia-card-expand_date">\n'+readable_date+'\n</h5>\n<h2 class="eventtia-card-expand_title">\n'+t+'\n</h2>\n<p class="eventtia-card-expand_text">\n'+a+'\n</p>\n<div class="eventtia-card-expand_button">\n<button class="eventtia-card-expand_btn eventtia-btn">\n'+n+"\n</button>\n</div>\n</div>\n</div>\n</li>\n</ul>\n"}if("button"!=widgetType){check_event_status();setInterval(function(){check_event_status()},6e4)}const{createClient:createClient}=supabase;let host=null,key=null;"prod"===env?(host="https://fmsesqjkbadnliholapv.supabase.co",key="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxMzc1NDgxNCwiZXhwIjoxOTI5MzMwODE0fQ.7Qi89BzXqzlBlAQWbLQ0CKJi70s0zPMjKeFUrdMgJFc"):(host="https://grjotsrqxlcjdhqqjmai.supabase.co",key="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxMzQyMDc0MiwiZXhwIjoxOTI4OTk2NzQyfQ.CtO-mvBItlH_chUShrE_CgDjoQ9llWiUa7WNsdCNsXY"),supabase=createClient(host,key);let db_id="none",user_id="8baf6150-aee1-43eb-8bdb-451c723dbf21",interval=null,current_utc_time=null;null===localStorage.getItem("eventtia-tag")?gen_uuid():db_id=localStorage.getItem("eventtia-tag");let interaction_id_js=0,div=document.createElement("div");div.innerHTML='<div class="modal-embed">\n<div class="modal-content">\n<span class="close-btn">&times;</span>\n<embed class="embed-modal" width="100%" height="100%" type="text/html" src="'+url+'">\n</div>\n</div>\n',document.body.appendChild(div);let modal=document.getElementsByClassName("modal-embed")[0],modalContent=document.getElementsByClassName("modal-content")[0],btn=document.getElementsByClassName("eventtia-btn"),span=document.getElementsByClassName("close-btn"),embed=document.getElementsByClassName("embed-modal")[0];for(let e=0;e<btn.length;e++)btn[e].onclick=function(){modal.style.display="block",interaction_id_js=Date.now(),update_session("open",interaction_id_js)};for(let e=0;e<span.length;e++)span[e].setAttribute("style","float: right; margin: 10px; font-weight: bold; cursor: pointer;"),span[e].onclick=function(){modal.style.display="none",update_session("close",interaction_id_js)};modal.setAttribute("style","display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto;  overflow: hidden"),modalContent.setAttribute("style","margin: auto; padding: 0px;"),embed.setAttribute("style","height: calc(100vh - 55px);");