let div=document.createElement("div"),params=document.getElementById("eventtia-library").src,url="";if(-1!==params.indexOf("url")){let e=params.indexOf("url");url=params.slice(e+4)}const{createClient:createClient}=supabase;supabase=createClient("https://grjotsrqxlcjdhqqjmai.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxMzQyMDc0MiwiZXhwIjoxOTI4OTk2NzQyfQ.CtO-mvBItlH_chUShrE_CgDjoQ9llWiUa7WNsdCNsXY");let db_id="none",user_id="8baf6150-aee1-43eb-8bdb-451c723dbf21",interval=null;function gen_uuid(){!async function(){const{data:e,error:t}=await supabase.from("id_gen").insert([{user_id:user_id}]);t?(console.log("Error creating UUID:"),console.log(t)):(db_id=e[0].id,localStorage.setItem("eventtia-tag",db_id))}()}function update_session(e){"none"!=db_id&&async function(){const{data:t,error:n}=await supabase.from("sessions").insert([{session_id:db_id,url:url,action:e}],{returning:"minimal"});n?(console.log("Error saving in Supabase:"),console.log(n)):("close"==e&&clearInterval(interval),"open"==e&&(interval=setInterval(function(){update_session("update")},6e4)))}()}null===localStorage.getItem("eventtia-tag")?gen_uuid():db_id=localStorage.getItem("eventtia-tag"),div.innerHTML='<div class="modal-embed">\n<div class="modal-content">\n<span class="close-btn">&times;</span>\n<embed class="embed-modal" width="100%" height="100%" type="text/html" src="'+url+'">\n</div>\n</div>\n',document.body.appendChild(div);let modal=document.getElementsByClassName("modal-embed")[0],modalContent=document.getElementsByClassName("modal-content")[0],btn=document.getElementsByClassName("eventtia-btn"),span=document.getElementsByClassName("close-btn"),embed=document.getElementsByClassName("embed-modal")[0];for(let e=0;e<btn.length;e++)btn[e].onclick=function(){modal.style.display="block",update_session("open")};for(let e=0;e<span.length;e++)span[e].setAttribute("style","color: #aaaaaa; float: right; margin: 10px; font-size: 28px; font-weight: bold; cursor: pointer;"),span[e].onclick=function(){modal.style.display="none",update_session("close")};modal.setAttribute("style","display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); overflow: hidden"),modalContent.setAttribute("style","background-color: #fefefe; margin: auto; padding: 0px; border: 1px solid #888;"),embed.setAttribute("style","height: calc(100vh - 55px);");